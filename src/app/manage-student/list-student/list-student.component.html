<!-- Content area -->
<div class="content">

  <!-- Invoice archive -->
  <div class="panel panel-white">
    <div class="panel-heading">
      <h6 class="panel-title">Liste étudiant</h6>
      <div class="heading-elements">
        <div class=" checkbox-switchery reviewOn">
          <label>
            <input type="checkbox" class="switch" [(ngModel)]="isReviewingMode">
            Reviewing Students
          </label>
        </div>
      </div>
    </div>
    <br>

    <table class="table datatable-basic" [ngBusy]="busy">
      <thead>
      <tr>
        <th>#</th>
        <th>Nom</th>
        <th>Prénom</th>
        <th>CIN</th>
        <th>email</th>
        <th>birthday</th>
        <th>Status</th>
        <th class="text-center">Actions</th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let student of students;let i=index;">
        <td>{{student.id_student}}</td>
        <td>
          {{student.first_name}}
        </td>
        <td>
          {{student.last_name}}
        </td>
        <td>
          {{student.cin?student.cin:student.passport}}
        </td>
        <td>
          {{student.email}}
        </td>
        <td>
          {{student.birthday}}
        </td>
        <td>
          <ul class="list list-unstyled text-right">
            <li></li>
            <li class="dropdown">
              <a href="#"
                 class="label {{student.administration_review===0?'bg-grey':student.administration_review===-1?'bg-danger':student.administration_review===1?'bg-green':'bg-warning'}}  dropdown-toggle"
                 data-toggle="dropdown">{{student.administration_review===0?"En
                attente":student.administration_review===-1?'Invalid':student.administration_review===1?'Valid':'A
                reviser'}}
                <span class="caret"></span></a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li><a (click)="updateStudentStatusAfterReview(i,1)"><i
                  class="icon-checkmark3"></i>Valider</a></li>
                <li><a (click)="updateStudentStatusAfterReview(i,2)"><i class="icon-warning"></i>A reviser</a>
                <li class="divider"></li>
                <li><a (click)="updateStudentStatusAfterReview(i,-1)"><i class="icon-cross2"></i>Refuser</a>
                </li>
              </ul>
            </li>
          </ul>

        </td>
        <td class="text-center">
          <ul class="icons-list">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <i class="icon-menu9"></i>
              </a>

              <ul class="dropdown-menu dropdown-menu-right">
                <li><a [routerLink]="'/student/'+student.id_student+'/detail'"><i class="icon-file-eye"></i>Voir détails</a>
                </li>
                <li><a [routerLink]="'/student/'+student.id_student+'/edit'"><i class="icon-pencil"></i>Editer</a></li>
                <li><a (click)="deleteStudent(i)"><i class="icon-close2"></i>Supprimer</a></li>
                <li><a (click)="openModalEmail(i)"><i class="icon-mail5"></i>Envoyer un email</a></li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <!-- /invoice archive -->

</div>
<!-- /content area -->

<div id="modal_form_vertical" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h5 class="modal-title">Envoyer un email</h5>
      </div>

      <div class="modal-body">

        <form action="#">
          <div class="row">
            <div class="col-md-10 col-md-offset-1">
              <div class="panel panel-flat">


                <div class="panel-body">
                  <div class="form-group">
                    <label>Destinataire:</label>
                    <input type="text" [(ngModel)]="selectedStudent.first_name +' '+ selectedStudent.last_name"
                           disabled="disabled"
                           [ngModelOptions]="{standalone: true}" class="form-control"
                           placeholder="Entrez votre nom et prénom">
                  </div>

                  <div class="form-group">
                    <label>Email:</label>
                    <input type="text" [(ngModel)]="selectedStudent.email" disabled="disabled"
                           [ngModelOptions]="{standalone: true}" class="form-control"
                           placeholder="Entrez votre adresse email">
                  </div>

                  <div class="form-group">
                    <label>Votre Message:</label>
                    <textarea rows="5" cols="5" [(ngModel)]="emailToSend" name="fhizf" class="form-control"
                              placeholder="Entrez votre texte ici"></textarea>
                  </div>

                  <div class="text-right">
                    <button type="submit" (click)="sendMail()" class="btn btn-primary">Envoyer<i
                      class="icon-arrow-right14 position-right"></i></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>


      </div>
    </div>
  </div>
</div>
